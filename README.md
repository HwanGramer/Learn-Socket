# 소켓프로그래밍 서버 , 클라이언트
* ## HTT와 AJAX
-HTTP(Hyper Text Transfer Protocol)는 오늘날 통신에 가장 널리 사용되고 있는 일종의 약속이자 형식이다. URL과 Header같은 부가 정보를 포함하여 사용자가 원하는 데이터를 정확히 주고받을 수 있도록 해준다. HTTP통신은 클라이언트 요청 한번에 응답 한 번을 보내고 통신을 끝내게된다.따라서 페이지의 일부분만 갱신하고 싶어도 응답을 다시 보내야한다. 
<br>

-이러한 제약으로부터 조금 더 진화한 AJAX라는 것이 등장한다. AJAX는 'Asynchronus JavaScript XML'의 약자로 XMLHttpRequest라는 자바스크립트 객체를 이용해 서버와 비동기 방식으로 통신하여 DOM을 조작해 문서의 일부분만 갱신하는 것을 가능하게 한다. 자주 사용되는 axios모듈도 AJAX이다. AJAX는 페이지를 일부분만 동적으로 생성하기 때문에 페이지 전체를 갱신하는 HTTP통신보다 렌더링 속도가 빠르고 오버헤드가 적다. 또 비동기 방식으로 통신을 하기 때문에 클라이언트가 불필요하게 대기하는 시간이 줄어든다.

<em>-따라서 HTTP대신 AJAX를 사용하는 경우는 이메일 중복체크나 비밀번호 확인 등 페이지 이동이 없는 경우와 빠른 렌더링을 보장하기 위한 경우에 사용된다.</em>
***

* ## WebSocket
-AJAX도 결국 HTTP통신이기 때문에 여전히 클라이언트가 요청을 보내지 않으면 통신을 시작할 수 없다는 한계가 있다. 실시간 알림 서비스를 생각해보면 어느쪽에서 먼저 통신을 걸어야 할까? 실시간 알림은 클라이언트가 먼저 요청을 보내야된다면 실시간 알림이 아니다. 이를 해결하기위한 통신규악이 생기게된다.<br><br>
-웹 소켓은 클라이언트와 서버 간의 양방향 통신이 가능하도록 지원하는 프로토콜이다. 'WebSocket Protocl(WS)'이 생겨나면서 클라이언트가 요청을 먼저 보내지 않아도 서버 측에서 데이터를 보낼 수 있게 되었다. WS는 특히 실시간 채팅이나 게임, 스트리밍 서비스 등을 궁극적으로 발전 시킨 원동력이 됬다.<br><br>
-클라이언트가 세 번의 요청을 보낸다고 하면 HTTP방식은 세번의 통신 연결이 필요하지만 웹 소켓을 사용하면 딱 한번만 연결을 맺고 양방향으로 통신이 가능하다. 이렇게 양방향 통신에 있어 성능이 훨씬 뛰어난 WS프로토콜은 구현방법도 생각보다 쉽다.<br><br>
-단순한 API로 구성되어 있어서 설계나 구현도 간결하고, 기존에 사용하던 http 통신으로 구현한 express서버와 포트도 공유가 가능하다. 또 XMLHttpRequest객체와 Server-Sent Events를 조합해서 사용하는 것도 가능하다.
***
* ## SSE (Sever-sent Evnets)
-기존에는 서버의 변경된 데이터를 가져오기 위해서 페이지 새로고침을 지속적으로 request를 보내는 ajax 폴링, 외부 플러그인 이용등을 사용해야됬다. SSE는 기존 HTTP웹 서버에서 HTTP API만으로 동작되며 구현도 간단하기 때문에 서버와 프론트엔드 양측 모두 매우 쉽게 개발이 가능하다.

-브라우저는 서버가 생성한 Stream을 계속 받는다(Server에서 보내는 Stream으로 Read Only) Connection 유지를 위해 HTTP protocol을 사용, HTTP/2를 통한 multiplexing사용가능 , 연결이 끊어지면 EventSource가 오류 이벤트를 발생시키고 자동으로 다시 연결을 시도한다.

-SSE는 효율적인 단방향 통신이 필요한경우 , 실시간 스트림밍에 HTTP를 사용하려는 경우(RestFul의 GET method와 유사)에 많이 사용된다.
***

* ## WS 와 SSE의 차이점
이둘의 대표적인 차이점은 Socket은 양방향 데이터를 주고받고 , SSE는 클라이언트는 데이터를 받기만 가능하다. 

||WS|SSE|
|------|---|---|
|통신방향|양방향|단방향(서버에서 클라이언트)|
|리얼타임|YES|YES|
|데이터형태|Binary , UTF-8|UTF-8|
|자동재접속|No|Yes(3초마다)|
|최대 동시 접속 수|한도없음(서버 셋업에 따라 다름|HTTP를 통해서 브라우저 6개까지 가능 , HTTP2로는 100개가 기본|
|포로토콜|webscoket|HTTP|
|배터리 소모량|큼|작음|
|firewall친화적|NO|Yes|

<em>차이점을 보면 SSE없이 WS만 있어도 양방향 통신에 문제가없다. 하지만 배터리 , 재접속등 때문에 사용처에 따라 선택으로 사용되는 편이다.<br><br></em>
-웹소켓은 주로 리얼타임이 필요한 곳에서 많이 사용된다.(카카오톡 챗 , 주식트레이딩 데이터 , 크립도 실시간 차트)<br>
-SSE는 알림을 줄때 많이사용된다. (SNS에서 피드를 받을 때 , 페이스북 친추 요청을 받았을때) 클라이언트에서는 데이터를 받기만 하면되고 실시간인 필요는 없을때 이다.<br>